(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,n){},132:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(32),s=n.n(r),i=n(13),o=n(10),l=n(3),u=n(165),d=(n(105),n(29)),j=n(14),b=n(15),h=n(1);var m=function(e){var t=e.user,n=e.bold,a=Object(c.useRef)(null),r={display:"flex",alignItems:"center"};return n&&(r=Object(d.a)(Object(d.a)({},r),{fontWeight:"bold"})),t?Object(h.jsxs)("div",{style:r,ref:a,children:[t.image?Object(h.jsx)("img",{src:t.image,className:"profile-pic"}):Object(h.jsx)(j.a,{icon:b.i,size:"lg"}),Object(h.jsx)("p",{className:"pl-2",children:t.name})]}):(console.log(t),Object(h.jsx)(h.Fragment,{children:" "}))},O=n(6),p=n.n(O),x=n(9),f=n(16),g=n.n(f),v=function(){var e=Object(x.a)(p.a.mark((function e(t,n,c){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:t,url:"http://10.0.0.7:5000/api/admin/"+n,headers:{token:localStorage.getItem("token"),"auth-type":localStorage.getItem("auth-type")},data:c});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,c){return e.apply(this,arguments)}}(),w=function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v("POST","categories",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v("GET","categories/naprovedcount"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v("DELETE","categories/"+t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:"POST",url:"http://10.0.0.7:5000/api/auth/googlelogin",data:{tokenId:{tokenId:t.tokenId}}});case 3:if(n=e.sent,c=n.data.token,console.log(n),!("token"in n.data)){e.next=10;break}return localStorage.setItem("token",c),localStorage.setItem("auth-type","google"),e.abrupt("return",{msg:"success",user:n.data.user,error:""});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:return e.abrupt("return",{msg:"failed",user:{},error:"Something went wrong"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:"GET",url:"http://10.0.0.7:5000/api/auth/is_logged",headers:{token:localStorage.getItem("token"),"auth-type":t}});case 3:if(!((n=e.sent).data.msg=n.data.user.email)){e.next=8;break}return e.abrupt("return",n.data.user);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(x.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:"POST",url:"http://10.0.0.7:5000/api/auth/login",data:{body:JSON.stringify(t)}});case 3:if(n=e.sent,c=n.data.token,console.log(n),!("token"in n.data)){e.next=12;break}return localStorage.setItem("token",c),localStorage.setItem("auth-type","JWT"),e.abrupt("return",{msg:"success",user:n.data.user});case 12:if(!("error"in n.data)){e.next=16;break}return e.abrupt("return",n.data.error);case 16:return e.abrupt("return","Something went wrong");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:"POST",url:"http://10.0.0.7:5000/api/auth/register",data:{body:JSON.stringify(t)}});case 3:if(n=e.sent,console.log(n),"Succesfully registered"!==n.data){e.next=10;break}return console.log("here we go"),e.abrupt("return","now login");case 10:if(!n.data){e.next=14;break}return e.abrupt("return",n.data);case 14:return e.abrupt("return","Something went wrong");case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","Something went wrong");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),I=a.a.createContext({}),A=function(e){var t=e.children,n=Object(c.useState)(""),a=Object(l.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(c.useState)(null),b=Object(l.a)(j,2),m=b[0],O=b[1];return Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("auth-type");e&&k(e).then((function(e){e&&O({logged:!0,name:e.name,email:e.email,image:e.image,admin:!!e.admin&&e.admin.isAdmin})}))}()}),[]),Object(c.useEffect)((function(){console.log(m)}),[m]),Object(h.jsx)(I.Provider,{value:{page:r,setPage:s,user:m,setUser:O,navigator:u,setNavigator:d,logout:function(){(null===m||void 0===m?void 0:m.logged)&&(localStorage.removeItem("token"),localStorage.removeItem("auth-type"),O(null))}},children:t})},P=function(){return Object(c.useContext)(I)};var T=function(e){var t,n=e.children,a=Object(o.g)(),r=Object(c.useState)(0),s=Object(l.a)(r,2),d=s[0],j=s[1],b=P().user,O=Object(o.f)();return Object(c.useEffect)((function(){b||O.push("/"),y().then((function(e){e&&"msg"in e.data&&j(e.data.msg)}))}),[]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"d-flex",children:[Object(h.jsxs)("div",{className:"admin-nav flex-center-col",children:[Object(h.jsx)("img",{src:"/images/logo.svg",className:"logo"}),Object(h.jsxs)("ul",{className:"flex-center-col",children:[Object(h.jsx)(i.b,{to:"/admin",className:"full-width",children:Object(h.jsx)("li",{className:"".concat("/admin"==a.pathname&&"active"),children:"User list"})}),Object(h.jsx)(i.b,{to:"/admin/categories",className:"full-width",children:Object(h.jsxs)("li",{className:"".concat("/admin/categories"===a.pathname&&"active"),children:["Categories",null!==(t=0!==d)&&void 0!==t?t:Object(h.jsx)(u.a,{variant:"danger",className:"ml-2",children:d})]})}),Object(h.jsx)(i.b,{to:"/admin/posts",className:"full-width",children:Object(h.jsx)("li",{className:"".concat("/admin/posts"===a.pathname&&"active"),children:"Posts"})})]})]}),Object(h.jsxs)("div",{className:"full-width",children:[Object(h.jsxs)("div",{className:"topPanel",children:[Object(h.jsx)("h3",{className:"pl-2",children:"Admine page"}),Object(h.jsx)("div",{className:"userBox",children:Object(h.jsx)(m,{user:{name:"David K\u0159\xedstek",email:"",image:"",createdAt:null},bold:!0})})]}),Object(h.jsx)("div",{className:"mainBox",children:n})]})]})})},L=n(166),B=n(167);var R=function(e){var t=e.text,n=e.number,c=e.color,a={backgroundColor:e.background};return c&&(a=Object(d.a)(Object(d.a)({},a),{color:c})),Object(h.jsxs)("div",{className:"infoBox",style:a,children:[Object(h.jsxs)("span",{className:"font3",children:[t,":"]}),Object(h.jsx)("span",{children:n})]})};var M=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),s=Object(l.a)(r,2),i=s[0],o=s[1],u=Object(c.useState)(0),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)(!1),m=Object(l.a)(h,2),O=m[0],p=m[1];Object(c.useEffect)((function(){v("GET","users").then((function(e){e&&(a(e.data),o(!1))}))}),[O]),Object(c.useEffect)((function(){x()}),[n]);var x=function(){if(n){console.log(n);var e=0;n.forEach((function(t){t.admin&&t.admin.isAdmin&&(e+=1)})),console.log(e),b(e)}},f=function(e){"msg"in e.data&&p((function(e){return!e}))};return{users:n,loading:i,adminCount:j,delAdmin:function(e){var t;(t=e,console.log(t),v("DELETE","users/admin/"+t)).then((function(e){f(e)}))},makAdmin:function(e){var t;(t=e,v("GET","users/admin/"+t)).then((function(e){f(e)}))},delUser:function(e){var t;(t=e,v("DELETE","users/"+t)).then((function(e){f(e)}))}}};var _=function(){var e=M(),t=e.loading,n=e.adminCount,c=e.delAdmin,a=e.makAdmin,r=e.delUser,s=e.users;return t?Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"heading",children:"Current users"})}):Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{className:"heading",children:"Current users"}),Object(h.jsxs)("div",{className:"infoBoxesBox",children:[Object(h.jsx)(R,{text:"Number of users",number:s?s.length:0,background:"#65CA6F"}),Object(h.jsx)(R,{text:"Number of admins",number:n,background:"#1426C4",color:"white"})]}),Object(h.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Username"}),Object(h.jsx)("th",{children:"Email"}),Object(h.jsx)("th",{children:"Created at"}),Object(h.jsx)("th",{children:"Profile image"}),Object(h.jsx)("th",{children:"Login type"}),Object(h.jsx)("th",{children:"Admin"}),Object(h.jsx)("th",{children:"Admin action"}),Object(h.jsx)("th",{children:"Remove user"})]})}),Object(h.jsx)("tbody",{children:s&&s.map((function(e,t){new Date(e.createdAt).toDateString();var n="google-log"===e.password?"google":"this page",s=e.admin&&e.admin.isAdmin?e.admin.mainAdmin?"main admin":"admin":"user";return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t}),Object(h.jsx)("td",{children:e.name}),Object(h.jsx)("td",{children:e.email}),Object(h.jsx)("td",{children:e.createdAt}),Object(h.jsx)("th",{children:Object(h.jsx)("img",{src:e.image,className:"profile-pic"})}),Object(h.jsx)("th",{children:n}),Object(h.jsx)("th",{children:s}),Object(h.jsx)("th",{children:"admin"===s?Object(h.jsx)(B.a,{variant:"primary",onClick:function(){c(e._id)},children:"Remove admin"}):"main admin"===s?"No action avivable":Object(h.jsx)(B.a,{variant:"primary",onClick:function(){a(e._id)},children:"Make admin"})}),Object(h.jsx)("th",{children:Object(h.jsx)(B.a,{variant:"danger",onClick:function(){r(e._id)},children:"Remove user"})})]},t)}))})]})]})};var D=function(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),s=Object(l.a)(r,2),i=s[0],o=s[1],u=Object(c.useState)(),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)(!1),m=Object(l.a)(h,2),O=m[0],p=m[1],x=Object(c.useRef)(null);Object(c.useState)(),Object(c.useEffect)((function(){v("GET","categories").then((function(e){if(e){var t=e.data;o(t.filter((function(e){return e.approved}))),b(t.filter((function(e){return!e.approved}))),a(!1)}}))}),[O]);var f=function(){p((function(e){return!e}))};return{loading:n,approvedCategories:i,notApprovedCategories:j,addCategoryForm:function(e){e.preventDefault(),x&&x.current&&w({name:x.current.value}).then((function(e){e&&"msg"in e.data&&f()}))},categoryInput:x,approveCategoryBt:function(e){var t;(t=e,v("GET","categories/"+t)).then((function(e){e&&"msg"in e.data&&f()}))},deleteCategoryBt:function(e){S(e).then((function(e){e&&"msg"in e.data&&f()}))}}};var U=function(){var e=D(),t=e.loading,n=e.approvedCategories,c=e.notApprovedCategories,a=e.addCategoryForm,r=e.categoryInput,s=e.approveCategoryBt,i=e.deleteCategoryBt;return t?Object(h.jsx)("p",{className:"heading",children:"Categoires"}):Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{className:"heading",children:"Categoires"}),Object(h.jsxs)("div",{className:"infoBoxesBox",children:[Object(h.jsx)(R,{text:"Number of approved categories",number:n?n.length:0,background:"#14C399",color:"white"}),Object(h.jsx)(R,{text:"Number of categories to approve",number:c?c.length:0,background:"#145AC3",color:"white"})]}),Object(h.jsx)("p",{children:"Add category"}),Object(h.jsxs)("form",{onSubmit:function(e){a(e)},children:[Object(h.jsx)("input",{type:"text",className:"input small-input no-radius-border-right",ref:r}),Object(h.jsx)(B.a,{variant:"success",className:"no-radius-border-left",type:"submit",children:"Confirm"})]}),Object(h.jsx)("p",{children:"Approved categories"}),Object(h.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Created"}),Object(h.jsx)("th",{children:"Remove category"})]})}),Object(h.jsx)("tbody",{children:n&&n.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t}),Object(h.jsx)("td",{children:e.name}),Object(h.jsx)("td",{children:e.createdByUser?e.createdByUser.name:"user deleted"}),Object(h.jsx)("td",{children:Object(h.jsx)(B.a,{variant:"danger",onClick:function(){i(e._id)},children:"Remove category"})})]},t)}))})]}),Object(h.jsx)("p",{children:"Categories to approve"}),Object(h.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Created"}),Object(h.jsx)("th",{children:"Approve category"}),Object(h.jsx)("th",{children:"Remove category"})]})}),Object(h.jsx)("tbody",{children:c&&c.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t}),Object(h.jsx)("td",{children:e.name}),Object(h.jsx)("td",{children:e.createdByUser?e.createdByUser.name:"user deleted"}),Object(h.jsx)("td",{children:Object(h.jsx)(B.a,{variant:"success",onClick:function(){s(e._id)},children:"Approve category"})}),Object(h.jsx)("td",{children:Object(h.jsx)(B.a,{variant:"danger",onClick:function(){i(e._id)},children:"Remove category"})})]},t)}))})]})]})};var G=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{className:"heading",children:"Current posts"}),Object(h.jsxs)("div",{className:"infoBoxesBox",children:[Object(h.jsx)(R,{text:"Number of posts",number:"4",background:"#65CA6F",color:"white"}),Object(h.jsx)(R,{text:"Number of pictures",number:"8",background:"#14C399",color:"white"}),Object(h.jsx)(R,{text:"Size of pictures",number:"60mb",background:"#145AC3",color:"white"})]}),Object(h.jsx)("p",{children:"Current posts"}),Object(h.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Description"}),Object(h.jsx)("th",{children:"Created by"}),Object(h.jsx)("th",{children:"Created at"}),Object(h.jsx)("th",{children:"Likes"}),Object(h.jsx)("th",{children:"Number of comments"}),Object(h.jsx)("th",{children:"Location"}),Object(h.jsx)("th",{children:"Images"}),Object(h.jsx)("th",{children:"Categories"}),Object(h.jsx)("th",{children:"More info"}),Object(h.jsx)("th",{children:"Remove post"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"1"}),Object(h.jsx)("td",{children:"Kolo"}),Object(h.jsx)("td",{children:"David Kristek"}),Object(h.jsx)("th",{children:Object(h.jsx)(B.a,{variant:"danger",children:"Remove user"})})]})})]}),Object(h.jsx)("p",{children:"Deleted posts"}),Object(h.jsxs)(L.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"#"}),Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Created"}),Object(h.jsx)("th",{children:"Approve category"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"1"}),Object(h.jsx)("td",{children:"Kolo"}),Object(h.jsx)("td",{children:"David Kristek"}),Object(h.jsx)("th",{children:Object(h.jsx)(B.a,{variant:"success",children:"Add back"})})]})})]})]})};var z=function(){var e=Object(o.h)(),t=e.path;return e.url,Object(h.jsx)("div",{children:Object(h.jsx)(T,{children:Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{exact:!0,path:t,children:Object(h.jsx)(_,{})}),Object(h.jsx)(o.a,{exact:!0,path:"".concat(t,"/categories"),children:Object(h.jsx)(U,{})}),Object(h.jsx)(o.a,{exact:!0,path:"".concat(t,"/posts"),children:Object(h.jsx)(G,{})})]})})})},F=n(169),H=n(171),W=n(170),K=n(168),J=n(50);n(34);var V=function(e){e.close;var t=e.setPopup,n=e.nowLogin,a=e.setNowLogin,r=P().setUser,s=Object(c.useState)(null),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(c.useState)(""),j=Object(l.a)(d,2),b=j[0],m=j[1],O=Object(c.useState)(""),f=Object(l.a)(O,2),g=f[0],v=f[1],w=Object(c.useState)(!1),y=Object(l.a)(w,2),S=y[0],k=y[1],E=function(){var e=Object(x.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),k(!0),C({email:b,password:g}).then((function(e){"success"===(null===e||void 0===e?void 0:e.msg)?(r({logged:!0,name:e.user.name,email:e.user.email,image:e.user.picture,admin:!!e.user.admin&&e.user.admin.isAdmin}),localStorage.setItem("auth-type","jwt"),u(null),t("")):u(e),k(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)(F.a.Header,{closeButton:!0,children:Object(h.jsx)(F.a.Title,{children:"Log in"})}),Object(h.jsxs)(F.a.Body,{children:[Object(h.jsx)(H.a,{variant:"success",onClose:function(){return a(!1)},show:n,dismissible:!0,children:"Succesfully registered, now login"}),Object(h.jsx)(H.a,{variant:"danger",onClose:function(){return u(null)},show:!!o,dismissible:!0,children:o}),Object(h.jsxs)(W.a,{onSubmit:E,children:[Object(h.jsxs)(W.a.Group,{controlId:"formBasicEmail",children:[Object(h.jsx)(W.a.Label,{children:"Email address"}),Object(h.jsx)(W.a.Control,{type:"email",placeholder:"Enter email",value:b,onChange:function(e){m(e.target.value)},isInvalid:!!o})]}),Object(h.jsxs)(W.a.Group,{controlId:"formBasicPassword",children:[Object(h.jsx)(W.a.Label,{children:"Password"}),Object(h.jsx)(W.a.Control,{type:"password",placeholder:"Password",value:g,onChange:function(e){v(e.target.value)},isInvalid:!!o})]}),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsxs)("p",{children:["Dont have account?",Object(h.jsxs)("a",{className:"text-primary point",onClick:function(){t("register")},children:[" ","Register"]})]}),Object(h.jsx)(B.a,{variant:"primary submit",type:"submit",children:S?Object(h.jsx)(K.a,{animation:"border",variant:"light"}):"Submit"})]})]}),Object(h.jsxs)("h5",{className:"mt-4 text-center border-top pt-4",children:["Continue with google:"," "]}),Object(h.jsx)("div",{className:"center mt-3 mb-3",children:Object(h.jsx)(J.GoogleLogin,{clientId:"236995755291-85hhe3gi2eaofgemhvcbv1horm067upu.apps.googleusercontent.com",buttonText:"Login in with google",onSuccess:function(e){N(e).then((function(e){"failed"===e.msg?u(e.error):(r({logged:!0,name:null===e||void 0===e?void 0:e.user.name,email:null===e||void 0===e?void 0:e.user.email,image:null===e||void 0===e?void 0:e.user.picture,admin:!!e.user.admin&&e.user.admin.isAdmin}),t(""))}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"})})]})]})},Y=function(e){N(e)},Z=function(e){console.log(e)};var Q=function(e){e.close;var t=e.setPopup,n=e.setNowLogin,a=Object(c.useState)(""),r=Object(l.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)(""),m=Object(l.a)(b,2),O=m[0],f=m[1],g=Object(c.useState)(""),v=Object(l.a)(g,2),w=v[0],y=v[1],S=Object(c.useState)(""),N=Object(l.a)(S,2),k=N[0],C=N[1],I=Object(c.useState)(""),A=Object(l.a)(I,2),P=A[0],T=A[1],L=function(){var e=Object(x.a)(p.a.mark((function e(c){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.preventDefault(),j(!0),E({name:O,password:k,email:w,password_confirmation:P}).then((function(e){"now login"===e?(n(!0),t("login")):(console.log(e),i(e)),j(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)(F.a.Header,{closeButton:!0,children:Object(h.jsx)(F.a.Title,{children:"Register"})}),Object(h.jsxs)(F.a.Body,{children:[Object(h.jsx)(H.a,{variant:"danger",onClose:function(){return i("")},show:!!s,dismissible:!0,children:s}),Object(h.jsxs)(W.a,{onSubmit:L,children:[Object(h.jsxs)(W.a.Group,{controlId:"formBasicUsername",children:[Object(h.jsx)(W.a.Label,{children:"Name"}),Object(h.jsx)(W.a.Control,{type:"text",placeholder:"Enter your name",value:O,onChange:function(e){f(e.target.value)},isInvalid:s.includes("name")})]}),Object(h.jsx)(W.a.Label,{children:"Email address"}),Object(h.jsx)(W.a.Group,{controlId:"formBasicEmail",children:Object(h.jsx)(W.a.Control,{type:"email",placeholder:"Enter email",value:w,onChange:function(e){y(e.target.value)},isInvalid:s.includes("email")||s.includes("Email")})}),Object(h.jsxs)(W.a.Group,{controlId:"formBasicPassword",children:[Object(h.jsx)(W.a.Label,{children:"Password"}),Object(h.jsx)(W.a.Control,{type:"password",placeholder:"Password",value:k,onChange:function(e){C(e.target.value)},isInvalid:s.includes("password")})]}),Object(h.jsxs)(W.a.Group,{controlId:"formPasswordConfirmation",children:[Object(h.jsx)(W.a.Label,{children:"Confirm Password"}),Object(h.jsx)(W.a.Control,{type:"password",placeholder:"Repeat password",value:P,onChange:function(e){T(e.target.value)},isInvalid:s.includes("password")})]}),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsxs)("p",{children:["Already have account?",Object(h.jsxs)("a",{className:"text-primary point",onClick:function(){t("login")},children:[" ","Login"]})]}),Object(h.jsx)(B.a,{variant:"primary submit",type:"submit",children:d?Object(h.jsx)(K.a,{animation:"border",variant:"light"}):"Submit"})]})]}),Object(h.jsxs)("h5",{className:"mt-4 text-center border-top pt-4",children:["Continue with google:"," "]}),Object(h.jsx)("div",{className:"center mt-3 mb-3",children:Object(h.jsx)(J.GoogleLogin,{clientId:"236995755291-85hhe3gi2eaofgemhvcbv1horm067upu.apps.googleusercontent.com",buttonText:"Login in with google",onSuccess:Y,onFailure:Z,cookiePolicy:"single_host_origin"})})]})]})},q=function(){var e=Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:"GET",url:"http://10.0.0.7:5000/api/category"});case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,g()({method:"POST",url:"http://10.0.0.7:5000/api/category/add",data:t,headers:{token:localStorage.getItem("token"),"auth-type":localStorage.getItem("auth-type")}});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();var $=function(e){e.close;var t=e.setPopup,n=Object(c.useState)(""),a=Object(l.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(c.useState)(!1),b=Object(l.a)(j,2),m=b[0],O=b[1],p=Object(c.useState)(),x=Object(l.a)(p,2),f=x[0],g=x[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)(F.a.Header,{closeButton:!0,children:Object(h.jsx)(F.a.Title,{children:"Add category"})}),Object(h.jsxs)(F.a.Body,{children:[Object(h.jsx)(H.a,{variant:"danger",onClose:function(){return d(null)},show:!!u,dismissible:!0,children:u}),Object(h.jsx)(H.a,{variant:"success",onClose:function(){return g("")},show:!!f,dismissible:!0,children:f}),Object(h.jsxs)(W.a,{onSubmit:function(e){e.preventDefault(),O(!0),X({name:r}).then((function(e){var n;console.log(e),e.msg?(d(null),g("V\xe1\u0161 n\xe1vrh na kategorii byl posl\xe1n ke schv\xe1len\xed"),(n=5e3,new Promise((function(e){return setTimeout(e,n)}))).then((function(e){t("")}))):e.err?d(e.err):d("Something went wrong"),O(!1)}))},children:[Object(h.jsxs)(W.a.Group,{controlId:"formBasicName",children:[Object(h.jsx)(W.a.Label,{children:"Name of category"}),Object(h.jsx)(W.a.Control,{type:"text",placeholder:"Enter name of category",value:r,onChange:function(e){s(e.target.value)},isInvalid:!!u})]}),Object(h.jsx)(B.a,{variant:"primary submit",type:"submit",children:m?Object(h.jsx)(K.a,{animation:"border",variant:"light"}):"Submit"})]})]})]})};var ee=function(e){var t=e.children,n=e.popup,a=e.setPopup,r=e.showPopup,s=e.setShowPopup,i=Object(c.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],j=Object(c.useRef)(null),b=function(){s(!1)};return n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(F.a,{show:r,onHide:b,ref:j,children:["login"===n&&Object(h.jsx)(V,{close:b,setPopup:a,nowLogin:u,setNowLogin:d}),"register"===n&&Object(h.jsx)(Q,{close:b,setPopup:a,setNowLogin:d}),"addCategory"===n&&Object(h.jsx)($,{close:b,setPopup:a})]}),t]}):Object(h.jsxs)(h.Fragment,{children:[" ",t]})};n(132);var te=function(e){var t=e.setPopup,n=e.setShowPopup,a=P(),r=a.page,s=a.user,o=a.logout,u=Object(c.useState)(r),d=Object(l.a)(u,2),m=d[0],O=d[1],p=Object(c.useState)(!0),x=Object(l.a)(p,2),f=x[0],g=x[1];return""!==r&&f&&(O(r),g(!1)),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("nav",{children:[Object(h.jsx)("img",{src:"/images/logo.svg"}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{onMouseOver:function(){O("posts")},onMouseOut:function(){O(r)},children:Object(h.jsx)(i.b,{to:"/",children:"Posts"})}),Object(h.jsx)("li",{onMouseOver:function(){O("chats")},onMouseOut:function(){O(r)},children:Object(h.jsx)(i.b,{to:"/chats",children:"Chats"})}),s?Object(h.jsxs)("li",{className:"nav-user",children:[s.name,s.image?Object(h.jsx)("img",{src:s.image,alt:"profile picture",className:"nav-profile-pic"}):Object(h.jsx)(j.a,{icon:b.i,size:"lg"}),Object(h.jsx)("div",{className:"nav-dropdown",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(i.b,{to:"add",children:"Add post"})}),Object(h.jsx)("li",{children:"Settings"}),Object(h.jsx)("li",{onClick:o,children:"Logout"})]})})]}):Object(h.jsxs)("li",{onMouseOver:function(){O("log")},onMouseOut:function(){O(r)},onClick:function(){t("login"),n(!0)},children:["Login",Object(h.jsx)(j.a,{icon:b.h,size:"lg"})]})]})]}),Object(h.jsx)("span",{className:"underline ".concat(m,"-nav")})]})};var ne=function(){var e=P().navigator,t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(),o=Object(l.a)(s,2),u=o[0],d=o[1];return Object(c.useEffect)((function(){r(e.split("|"))}),[e]),Object(c.useEffect)((function(){var e=0;if(a){var t=a.map((function(t,n,c){e++;var a,r="";switch(t){case"posts":r="/";break;case"add post":r="/add";break;default:r=t}return t=(a=t).charAt(0).toUpperCase()+a.slice(1),c.length-1===n?Object(h.jsx)(i.b,{to:r,className:"link font2",children:t},e):Object(h.jsxs)("span",{children:[Object(h.jsx)(i.b,{to:r,className:"link font2",children:t},e)," "," >"]},e)}));d(t)}}),[a]),Object(h.jsx)("div",{className:"navigator",children:u})},ce=n(54),ae=n.n(ce),re=function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()("http://10.0.0.7:5000/api/posts/add",{method:"POST",data:t,headers:{token:localStorage.getItem("token"),"auth-type":localStorage.getItem("auth-type")}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{err:"Something went wrong"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:"GET",url:"http://10.0.0.7:5000/api/posts"});case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(x.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g()({method:"GET",url:"http://10.0.0.7:5000/api/posts/like/"+t,headers:{token:localStorage.getItem("token"),"auth-type":localStorage.getItem("auth-type")}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(x.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(new FormData).append("text",n),e.prev=2,e.next=5,g()({method:"POST",url:"http://10.0.0.7:5000/api/posts/comment/"+t,headers:{token:localStorage.getItem("token"),"auth-type":localStorage.getItem("auth-type")},data:{text:n}});case 5:return c=e.sent,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}();var le=function(e){var t=P(),n=t.setPage,a=t.setNavigator,r=(t.user,Object(c.useState)()),s=Object(l.a)(r,2),i=s[0],o=s[1],u=Object(c.useState)(!0),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(c.useState)(0),m=Object(l.a)(h,2),O=m[0],p=m[1],x=Object(c.useState)(),f=Object(l.a)(x,2),g=f[0],v=f[1],w=Object(c.useState)("display-0"),y=Object(l.a)(w,2),S=y[0],N=y[1];Object(c.useEffect)((function(){k(),n("posts"),a("posts|")}),[]);var k=function(){se().then((function(e){console.log("fetched"),e&&(o(e.data),b(!1))}))};return{loading:j,posts:i,imgIndex:O,toRight:function(){p((function(e){return e+1})),O+2===e&&v("display-0"),N("display")},toLeft:function(){console.log("display"),p((function(e){return e-1})),O-1===0&&N("display-0"),v("display")},rightArrow:g,leftArrow:S}},ue=(n(77),n(11)),de=n(94),je=n.n(de)()("http://10.0.0.7:5000");var be=function(e){var t=e.postInfo,n=P().user,a=Object(c.useState)(0),r=Object(l.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)(""),h=Object(l.a)(b,2),m=h[0],O=h[1],p=Object(c.useState)(),x=Object(l.a)(p,2),f=x[0],g=x[1];Object(c.useEffect)((function(){v(),j(y()),n||j(!1),w(),i(t.likedByUsers.length);var e=t.comments.reverse();g(e)}),[n]);var v=function(){je.on("getComments",(function(e){g(e)})),je.on("getLikeCount",(function(e){i(e)}))},w=function(){if(t.createdAt){var e=new Date(t.createdAt);O(e.toDateString())}},y=function(){return!!n&&t.likedByUsers.filter((function(e){return e.email==n.email})).length>0};return{liked:d,likeCount:s,like:function(){ie(t._id).then((function(e){e&&("data"in e&&"msg"in e.data&&("like"===e.data.msg&&(j(!0),i((function(e){return e+1}))),"unlike"===e.data.msg&&(j(!1),i((function(e){return e-1})))),je.emit("likeCount",t._id))}))},date:m,shorterLocationLabel:function(){if(t.location)return t.location.label.split(",")[0]},addComment:function(e,c){e.preventDefault(),c&&n&&oe(t._id,c).then((function(e){if(e&&"commented"===e.data.msg){je.emit("actComment",t._id);var a={text:c,commentedByUser:{name:n.name,email:n.email,image:n.image,createdAt:null}};if(!f)return;g([a].concat(Object(ue.a)(f)))}}))},comments:f}};var he=function(e){var t=e.text,n=e.user;return Object(h.jsxs)("div",{className:"comment",children:[Object(h.jsx)(m,{user:n,bold:!0}),Object(h.jsx)("span",{className:"font3",children:null!==t&&void 0!==t?t:""})]})};var me=function(e){var t=e.postInfo,n=le(t.images.length),a=n.imgIndex,r=n.toRight,s=n.toLeft,i=n.rightArrow,o=n.leftArrow,u=be({postInfo:t}),d=u.liked,O=u.likeCount,p=u.like,x=u.date,f=u.shorterLocationLabel,g=u.addComment,v=u.comments,w=(P().user,Object(c.useState)(!1)),y=Object(l.a)(w,2),S=y[0],N=y[1],k=Object(c.useRef)(null);return Object(h.jsxs)("div",{className:"post",children:[Object(h.jsxs)("div",{className:"top",children:[Object(h.jsx)(m,{user:t.createdByUser}),Object(h.jsxs)("div",{className:"right",children:[Object(h.jsx)("span",{className:"pr-3",children:x}),Object(h.jsx)("span",{className:"pl-2",children:t.location&&t.location.label.length>30?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{icon:b.f,size:"lg"}),f()]}):t.location&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{icon:b.f,size:"lg"}),t.location.label]})})]})]}),Object(h.jsx)("div",{className:"center",children:t.images.length>1?t.images.map((function(e,t){var n="";return t===a&&(n="active"),t===a+1&&(n="right"),t===a-1&&(n="left"),Object(h.jsx)("img",{src:"/uploads/"+e,className:n},t)})):t.images.length>0&&Object(h.jsx)("img",{src:"/uploads/"+t.images[0],className:"active"})}),t.images.length>1&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{icon:b.b,size:"5x",className:"arrow leftArrow ".concat(o),onClick:s}),Object(h.jsx)(j.a,{icon:b.c,size:"5x",className:"arrow rightArrow ".concat(i),onClick:r})]}),Object(h.jsxs)("div",{className:"bottom",children:[Object(h.jsxs)("div",{className:"left",children:[Object(h.jsxs)("div",{className:"htop",children:[Object(h.jsx)("h3",{className:"font1",children:t.name}),t.categories&&t.categories.map((function(e,t){return Object(h.jsx)("div",{className:"category",children:e.name},t)}))]}),Object(h.jsx)("p",{className:"font3",children:t.description})]}),Object(h.jsxs)("div",{className:"right",children:[Object(h.jsx)("span",{className:"font2",children:O}),Object(h.jsx)(j.a,{icon:b.e,size:"2x",className:d?"heart":"heart heart-unactive",onClick:p}),Object(h.jsx)("span",{className:"font2",children:v?v.length:0}),Object(h.jsx)(j.a,{icon:b.d,size:"2x",className:"comment-icon comment-icon-unactive",onClick:function(){N((function(e){return!e}))}})]})]}),S&&Object(h.jsxs)("div",{className:"comments-box",children:[v&&v.map((function(e,t){var n;return Object(h.jsx)(he,{text:null!==(n=e.text)&&void 0!==n?n:"",user:e.commentedByUser},t)})),Object(h.jsxs)("form",{className:"mr-1 mt-3",onSubmit:function(e){var t,n;g(e,null===(t=k.current)||void 0===t?void 0:t.value),(null===(n=k.current)||void 0===n?void 0:n.value)&&(k.current.value="")},children:[Object(h.jsx)("input",{type:"text",ref:k,className:"input small-input no-radius-border-right",placeholder:"Add comment",style:{width:"50%"}}),Object(h.jsx)(B.a,{variant:"primary",type:"submit",className:"no-radius-border-left",children:Object(h.jsx)(j.a,{icon:b.g,size:"lg"})})]})]})]})};var Oe,pe=function(){P().setPage;var e=le(0),t=e.loading,n=e.posts;return Object(h.jsx)("main",{className:"home",children:t?Object(h.jsx)("div",{className:"center mt-5",children:Object(h.jsx)(ae.a,{type:"bars",color:"rgb(140, 138, 146)",width:"10%"})}):Object(h.jsx)(h.Fragment,{children:n&&n.map((function(e,t){return Object(h.jsx)(me,{postInfo:e},t)}))})})},xe=n(100),fe=(n(162),function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),s=Object(l.a)(r,2),i=s[0],o=s[1],u=Object(c.useState)(!0),d=Object(l.a)(u,2),j=(d[0],d[1]),b=function(e){if(e.getResults()[0].results.length){var t=e.getResults()[0].results;o(t)}else o(null)};return Object(c.useEffect)((function(){var e=document.createElement("script");return e.src="https://api.mapy.cz/loader.js",e.async=!0,e.onload=function(){window.Loader.async=!0,window.Loader.load(null,null,(function(){var e,t;n&&(e=n,(t=window.SMap)&&new t.Geocoder(e,b,{bbox:[t.Coords.fromWGS84(12.09,51.06),t.Coords.fromWGS84(18.87,48.55)]}))})),j(!1)},document.body.appendChild(e),function(){document.body.removeChild(e)}}),[n]),{setLoactionToFind:a,result:i}}),ge=n(95),ve={BASE:1,TURIST:2,OPHOTO:3,HYBRID:4,HISTORIC:5,BIKE:6,TRAIL:7,OPHOTO0203:8,OPHOTO0406:9,OBLIQUE:12,SMART_BASE:14,SMART_OPHOTO:15,SMART_TURIST:16,RELIEF:17,TURIST_WINTER:19,SMART_WINTER:20,SUMMER:21,SMART_SUMMER:22,GEOGRAPHY:23,OPHOTO1012:24,HYBRID_SPARSE:25,OPHOTO1415:26,BASE_NEW:27,TURIST_NEW:28},we=n(96),ye=Object(c.createContext)(null),Se=we.a.div(Oe||(Oe=Object(ge.a)(["\n  img {\n    max-width: initial !important;\n  }\n"]))),Ne=function(e){var t=Object(c.useState)(!0),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useRef)(null),i=Object(c.useState)(null),o=Object(l.a)(i,2),u=o[0],d=o[1],j=e.width,b=e.height,m=e.children;return Object(c.useEffect)((function(){var t=document.createElement("script");t.src="https://api.mapy.cz/loader.js",t.async=!0,t.onload=function(){return window.Loader.async=!0,window.Loader.load(null,null,(function(){r(!1);var t=e.zoom,n=e.center,c=e.marker,a=window.SMap.Coords.fromWGS84(n.lng,n.lat),i=new window.SMap(s.current,a,t);if(i.addDefaultLayer(ve.TURIST_NEW).enable(),i.addDefaultLayer(window.SMap.DEF_BASE).enable(),i.addDefaultControls(),c){var o=new window.SMap.Layer.Marker;null===i||void 0===i||i.addLayer(o),o.enable();var l=window.SMap.Coords.fromWGS84(c.x,c.y),u=new window.SMap.Marker(l,!1);null===o||void 0===o||o.addMarker(u),console.log("marker")}d(i)})),function(){document.body.removeChild(t)}},document.body.appendChild(t)}),[e.marker]),a?Object(h.jsx)("div",{children:"Loading"}):Object(h.jsx)(ye.Provider,{value:u,children:Object(h.jsx)(Se,{style:{width:j,height:b},ref:s,children:u&&m})})};Ne.defaultProps={width:"100%",height:"300px",zoom:13,minZoom:1,maxZoom:21,baseLayers:[ve.TURIST_NEW]};var ke=Ne;var Ce=function(){return{delay:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}};var Ee=function(){var e=P().user,t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)([]),i=Object(l.a)(s,2),u=i[0],d=i[1],j=Object(c.useState)(""),b=Object(l.a)(j,2),h=b[0],m=b[1],O=Object(c.useState)(!1),p=Object(l.a)(O,2),x=p[0],f=p[1],g=Object(c.useState)(""),v=Object(l.a)(g,2),w=v[0],y=v[1],S=Object(o.f)(),N=Ce().delay,k=P(),C=k.setPage,E=(k.page,k.setNavigator);return Object(c.useEffect)((function(){e||S.push("/"),C("posts"),E("posts|add post"),q().then((function(e){e&&r(e.data)}))}),[]),{categories:a,selectCategory:function(e,t){d(t?function(t){return[].concat(Object(ue.a)(t),[e])}:function(t){return t.filter((function(t){return t!==e}))})},selectedCategories:u,formSubmit:function(e){f(!0);var t=e.data,n=e.mapCoors,c=e.images,a=new FormData;a.append("name",t.name),a.append("description",t.description),n&&(a.append("location",n.x.toString()),a.append("location",n.y.toString()),a.append("place",t.location)),u.length>0&&Object(ue.a)(u).forEach((function(e,t){a.append("categories",u[t])})),c&&Object(ue.a)(c).forEach((function(e,t){a.append("images",c[t])})),re(a).then((function(e){console.log(e),"err"in e?(y(""),m(e.err)):"msg"in e?(m(""),y(e.msg),N(3).then((function(){S.push("/")}))):(y(""),m("Something went wrong")),f(!1)}))},error:h,msg:w,closeAlert:function(){m(""),y("")},loading:x,setError:m}};var Ie=function(e){var t=e.setPopup,n=e.setShowPopup,a=Object(c.useState)(),r=Object(l.a)(a,2),s=(r[0],r[1],Object(c.useState)()),i=Object(l.a)(s,2),o=i[0],u=i[1],m=Object(c.useState)(),O=Object(l.a)(m,2),p=O[0],x=O[1],f=Ee(),g=f.categories,v=f.selectCategory,w=f.formSubmit,y=f.error,S=f.msg,N=f.closeAlert,k=f.loading,C=fe(),E=C.setLoactionToFind,I=C.result,A=Object(xe.a)(),P=A.register,T=A.handleSubmit,L=A.getValues,R=A.setValue,M=(0,A.watch)("location"),_=Object(c.useMemo)((function(){return I}),[I]);return Object(c.useEffect)((function(){M&&E(M)}),[M]),Object(h.jsxs)("main",{className:"add-post-box",children:[Object(h.jsx)("h1",{className:"mb-3",children:"New Post"}),Object(h.jsxs)("div",{className:"add-post-form",children:[Object(h.jsx)(H.a,{variant:"".concat(y?"danger":"").concat(S?"success":""," "),onClose:N,show:!!y||!!S,dismissible:!0,children:"".concat(y||"").concat(S||"")}),Object(h.jsxs)("form",{onSubmit:T((function(e){w({data:e,images:p,mapCoors:o})})),children:[Object(h.jsx)("p",{className:"font1",children:"Name"}),Object(h.jsx)("input",Object(d.a)({type:"text",className:"input name",placeholder:"Enter name of post"},P("name"))),Object(h.jsx)("p",{className:"font1",children:"Description"}),Object(h.jsx)("textarea",Object(d.a)({rows:3,className:"input",placeholder:"Enter description  ...."},P("description"))),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsx)("p",{className:"font1",children:"Choose categories: "}),Object(h.jsx)("p",{className:"font2 link",onClick:function(){t("addCategory"),n(!0)},children:"Add category"})]}),Object(h.jsx)("div",{className:"category-box",children:g?g.map((function(e,t){return Object(h.jsxs)("div",{className:"category",children:[e.name,Object(h.jsx)("input",{type:"checkbox",className:"checkmark",onChange:function(t){v(e._id,t.target.checked)}})]},t)})):Object(h.jsx)(ae.a,{type:"cylon",height:50,width:375,color:"white",className:"category loading-cat"})}),Object(h.jsx)("p",{className:"font1",children:"Add location"}),Object(h.jsxs)("div",{className:"fl-between",children:[Object(h.jsxs)("div",{style:{width:"100%"},children:[Object(h.jsx)("input",Object(d.a)({type:"text",className:"input map-inp",placeholder:"Enter name of location or area"},P("location"))),Object(h.jsx)(B.a,{variant:"success",className:"check",children:Object(h.jsx)(j.a,{icon:b.a,size:"2x"})}),Object(h.jsx)("ul",{className:"help font2",children:_&&""!==L("location")?_.slice(0,3).map((function(e,t){return Object(h.jsx)("li",{onClick:function(){var t,n;t=e.coords,n=e.label,R("location",n),_=null,u(t)},children:e.label},t)})):""})]}),Object(h.jsx)("div",{className:"map",children:o?Object(h.jsx)(ke,{height:"100%",center:{lat:o.y,lng:o.x},zoom:11,marker:o}):Object(h.jsx)(ke,{height:"100%",center:{lat:50.0755,lng:14.4378},zoom:5})})]}),Object(h.jsx)("p",{className:"font1",children:"Add photos"}),Object(h.jsx)("input",{type:"file",name:"imgCollection",onChange:function(e){x(e.target.files)},multiple:!0}),Object(h.jsxs)("p",{className:"font2 mt-1",children:[p?p.length:0," photos selected"]}),Object(h.jsx)("div",{className:"photos"}),Object(h.jsx)(B.a,{variant:"success mt-4 font1",className:"upload",type:"submit",children:k?Object(h.jsx)(K.a,{animation:"border",variant:"light"}):"Upload post"})]})]})]})};var Ae=function(){var e=P().setPage;return Object(c.useEffect)((function(){e("about")}),[]),Object(h.jsx)("div",{children:"About us"})};var Pe=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(l.a)(r,2),i=s[0],u=s[1];return Object(h.jsx)(o.c,{children:Object(h.jsxs)(ee,{popup:n,setPopup:a,showPopup:i,setShowPopup:u,children:[Object(h.jsx)(te,{setPopup:a,setShowPopup:u}),Object(h.jsx)(ne,{}),Object(h.jsx)(o.a,{exact:!0,path:"/",children:Object(h.jsx)(pe,{})}),Object(h.jsx)(o.a,{exact:!0,path:"/add",children:Object(h.jsx)(Ie,{setPopup:a,setShowPopup:u})}),Object(h.jsx)(o.a,{path:"/chats",children:Object(h.jsx)(Ae,{})}),Object(h.jsx)(o.a,{path:"*",children:Object(h.jsx)("p",{className:"text-danger",children:"Nothings 404!"})})]})})};var Te=function(){return Object(h.jsx)(i.a,{children:Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"/admin",children:Object(h.jsx)(z,{})}),Object(h.jsx)(o.a,{children:Object(h.jsx)(Pe,{})})]})})};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(A,{children:Object(h.jsx)(Te,{})})}),document.getElementById("root"))},34:function(e,t,n){},77:function(e,t,n){}},[[163,1,2]]]);
//# sourceMappingURL=main.f3f011a6.chunk.js.map